AWS **EC2 Ubuntu 인스턴스**에 **MariaDB**를 직접 설치하여 서비스하는 방법과, 관리 편의성을 위해 AWS **RDS**를 활용하여 MariaDB를 배포하는 방법을 모두 안내해 드리겠습니다.

-----

## 1\. EC2 Ubuntu 기반 MariaDB 수동 배포 (직접 관리형)

이 방법은 OS부터 DB까지 모든 것을 직접 제어하고 관리할 때 사용됩니다. (앞서 설명된 내용의 요약 및 강조)

### 1.1. 인스턴스 준비 및 MariaDB 설치

1.  **EC2 인스턴스 생성**: AWS 콘솔에서 **Ubuntu Server** 인스턴스를 생성하고, 적절한 사양(T3/T4g 인스턴스 권장)을 선택합니다.

2.  **보안 그룹 설정**: **3306 포트**를 애플리케이션 서버나 개발자 PC의 IP 주소로만 제한합니다. 이는 **가장 중요한 보안 조치**입니다.

3.  **MariaDB 설치**: SSH 접속 후, 아래 명령으로 MariaDB를 설치합니다.

    ```bash
    sudo apt update
    sudo apt install mariadb-server -y
    sudo mysql_secure_installation # 보안 강화 필수
    ```

### 1.2. 원격 접속 설정 및 사용자 권한 관리

1.  **바인드 주소 변경**: `/etc/mysql/mariadb.conf.d/50-server.cnf` 파일을 수정하여 `bind-address = 0.0.0.0`으로 변경하고 서비스를 재시작합니다.

2.  **사용자 및 권한 부여**: `root`로 접속하여 원격 접속용 사용자 계정을 생성하고, 특정 DB에 대한 권한을 부여합니다.

    ```sql
    -- MariaDB 쉘 내부
    CREATE USER 'app_user'@'%' IDENTIFIED BY 'StrongP@ssw0rd!';
    GRANT SELECT, INSERT, UPDATE, DELETE ON your_database.* TO 'app_user'@'%';
    FLUSH PRIVILEGES;
    ```

-----

## 2\. AWS RDS MariaDB 인스턴스 배포 (클라우드 관리형)

대부분의 프로덕션 환경에서는 관리 편의성, 고가용성, 자동 백업 등을 제공하는 **AWS RDS** 서비스를 사용하는 것을 강력히 권장합니다.

### 2.1. ⚙️ RDS 인스턴스 구성 단계

1.  **DB 엔진 선택**: AWS RDS 콘솔에서 **MariaDB**를 선택하고 버전을 지정합니다.
2.  **템플릿 및 사양**:
      * **템플릿**: 개발/테스트 또는 프로덕션 환경에 맞춰 선택합니다.
      * **DB 인스턴스 식별자**: 인스턴스 이름(예: `maria-prod-db`)을 지정합니다.
      * **마스터 자격 증명**: 관리자 사용자명(예: `admin`)과 강력한 비밀번호를 설정합니다.
3.  **네트워크 및 보안**:
      * **VPC**: 인스턴스를 배포할 **VPC**를 선택합니다.
      * **서브넷 그룹**: DB 인스턴스가 배포될 프라이빗 서브넷 그룹을 지정합니다.
      * **퍼블릭 액세스 가능**: \*\*'아니요'\*\*를 선택하여 DB를 인터넷으로부터 분리해야 합니다. (접속은 VPC 내부 또는 VPN/Bastion Host를 통해 이루어집니다.)
      * **VPC 보안 그룹**: DB 포트(`3306`)를 **EC2 애플리케이션 서버의 보안 그룹**만 허용하도록 설정합니다.

### 2.2. 📈 고가용성 및 성능 설정

  * **다중 AZ 배포 (Multi-AZ)**: \*\*'예'\*\*를 선택하여 다른 가용 영역에 복제본을 생성합니다. 이는 장애 시 자동 Failover를 보장하는 **가장 중요한 설정**입니다.
  * **스토리지 자동 조정 활성화**: 디스크 용량이 부족해지는 것을 방지하기 위해 스토리지를 자동으로 확장하도록 설정합니다.

### 2.3. 🗃️ 백업 및 유지 관리 설정

  * **백업 보존 기간**: 최소 7일 이상 설정합니다.
  * **유지 관리 기간**: DB 엔진 패치 등이 이루어질 시간을 설정합니다. 트래픽이 가장 적은 시간대로 설정하는 것이 좋습니다.

### 2.4. 📌 RDS 사용의 이점 (강조점)

| 특징 | 설명 | 실전 팁 |
| :--- | :--- | :--- |
| **자동 백업** | 설정된 기간 동안 스냅샷과 트랜잭션 로그 기반 복구(PITR) 제공. | 복구 테스트를 주기적으로 수행하여 백업의 유효성을 검증해야 합니다. |
| **고가용성 (Multi-AZ)** | DB 인스턴스 장애 발생 시, 다른 AZ의 대기 인스턴스로 자동 전환. | 이중화 비용은 발생하지만, 서비스 다운타임을 극적으로 줄여줍니다. |
| **관리 자동화** | OS 패치, DB 엔진 패치, 모니터링은 AWS가 담당. | 개발팀은 인프라 대신 **쿼리 최적화**와 **DB 스키마 설계**에 집중할 수 있습니다. |

**결론**: 프로덕션 환경에서는 EC2에 직접 설치하는 것보다 AWS **RDS MariaDB**를 배포하는 것이 **보안, 안정성, 관리 효율성** 측면에서 압도적으로 우수합니다.
