## 클라우드 CLI (Command Line Interface)의 이해와 필요성

클라우드 컴퓨팅 환경에서 리소스를 제어하는 방법은 크게 웹 브라우저를 이용하는 **웹 콘솔(GUI)** 방식과 터미널에서 명령어를 입력하는 **CLI(Command Line Interface)** 방식으로 나뉩니다. 클라우드 입문자는 직관적인 웹 콘솔을 선호하지만, 아키텍트나 데브옵스(DevOps) 엔지니어와 같은 전문가 단계로 진입하기 위해서는 CLI 활용 능력이 필수적입니다.

이 장에서는 왜 클라우드 CLI를 사용해야 하는지, 그리고 IaC(Infrastructure as Code) 및 자동화 환경에서 어떤 역할을 하는지 상세히 다룹니다.

---

### 1. 클라우드 CLI란 무엇인가?

클라우드 CLI는 사용자가 텍스트 기반의 명령어(Command)를 입력하여 AWS, Azure, GCP와 같은 CSP(Cloud Service Provider)의 API(Application Programming Interface)를 직접 호출하고 제어하는 도구입니다.

* **GUI (Web Console):** 마우스 클릭으로 메뉴를 찾아가며 리소스를 생성. 직관적이지만 단계가 많고 반복 작업에 취약함.
* **CLI (Terminal):** 명확한 명령어 한 줄로 리소스를 생성 및 제어. 숙련도가 필요하지만 빠르고 정확하며 자동화가 가능함.

---

### 2. 왜 CLI를 써야 하는가? (핵심 가치와 특징)

전문가가 웹 콘솔 대신 CLI를 주력으로 사용하는 이유는 단순한 '취향'이 아닌, 대규모 인프라 운영에 필수적인 **효율성**과 **안정성** 때문입니다.

#### 2.1 압도적인 속도와 생산성

웹 콘솔에서 EC2 인스턴스 하나를 생성하려면 [로그인] → [서비스 이동] → [리전 선택] → [스펙 선택] → [보안 그룹 설정] 등 수십 번의 클릭이 필요합니다. 반면, CLI는 미리 작성된 명령어 한 줄이면 즉시 생성이 시작됩니다.

#### 2.2 반복 작업의 자동화 (Automation)

"개발용 서버 50대를 매일 밤 11시에 끄고, 아침 8시에 켜라"는 업무가 주어졌다고 가정해 봅시다.

* **웹 콘솔:** 매일 50번씩 클릭해야 합니다. (실수 가능성 높음)
* **CLI:** 간단한 스크립트(Shell Script, Python 등)를 작성하여 `Cron` 등의 스케줄러에 등록하면 사람의 개입 없이 평생 자동으로 수행됩니다.

#### 2.3 정밀한 제어와 필터링 (Query)

웹 콘솔은 CSP가 미리 디자인한 화면만 볼 수 있습니다. 하지만 CLI는 `--query` 옵션을 통해 내가 원하는 데이터만 추출하여 가공할 수 있습니다.

* *예: "현재 실행 중인 서버 중, 이름이 'Web'으로 시작하는 서버의 IP 주소만 리스트로 뽑아줘."*

---

### 3. IaC (Infrastructure as Code)와 CLI의 관계

최근 클라우드 운영의 표준인 **IaC(코드형 인프라)** 환경에서 CLI는 엔진이자 접착제 역할을 합니다.

#### 3.1 Terraform, Ansible과 CLI

Terraform과 같은 도구는 사용자가 작성한 코드를 해석하여 클라우드 리소스를 생성합니다. 이때 내부적으로는 클라우드 공급자의 API를 호출하는데, 이 과정은 CLI가 수행하는 동작과 논리적으로 동일합니다.

* **Terraform:** 전체 인프라의 '최종 상태(State)'를 정의하고 관리하는 도구.
* **CLI:** Terraform이 커버하지 못하는 세밀한 1회성 작업이나, Terraform 실행 전후의 환경 설정(Pre/Post script)을 처리하는 도구.

> **전문가의 활용 예:**
> Terraform으로 전체 네트워크와 서버를 구축하고, 배포가 끝난 직후 **AWS CLI**를 이용해 해당 서버들에 특정 보안 패치 명령을 날리거나 S3 버킷의 내부 데이터를 정리하는 식의 '하이브리드 운용'이 일반적입니다.

#### 3.2 CI/CD 파이프라인의 필수 요소

GitHub Actions, Jenkins, GitLab CI와 같은 CI/CD 도구는 그래픽 화면(GUI)이 없는 리눅스 서버에서 돌아갑니다. 따라서 배포 자동화를 구축하려면 화면을 보고 클릭하는 방식은 불가능하며, 오직 **CLI 명령어 기반의 스크립트**만이 파이프라인 안에서 동작할 수 있습니다.

---

### 4. 전문가의 CLI 활용 시나리오 (Use Cases)

실무 현장에서 엔지니어가 CLI를 사용하여 문제를 해결하는 구체적인 예시입니다.

#### 시나리오 A: 대규모 리소스 일괄 제어

* **상황:** 프로젝트 종료로 인해 테스트용으로 만든 100개의 스냅샷(Snapshot)을 모두 삭제해야 함.
* **CLI 해결:**
```bash
# (의사 코드 예시)
aws ec2 describe-snapshots --owner-ids self --query "Snapshots[*].SnapshotId" | xargs -I {} aws ec2 delete-snapshot --snapshot-id {}

```


단 한 줄의 명령어로 100개의 스냅샷을 ID 조회부터 삭제까지 일괄 처리합니다.

#### 시나리오 B: 보안 그룹(Firewall) 긴급 점검

* **상황:** 보안팀에서 "현재 모든 서버 중 22번 포트(SSH)가 전체(0.0.0.0/0)로 열려 있는 취약한 보안 그룹을 즉시 찾아내시오"라고 요청.
* **CLI 해결:** 웹 콘솔에서 수백 개의 보안 그룹을 일일이 눌러보는 것은 불가능합니다. CLI를 사용하면 조건문 필터링을 통해 3초 안에 해당 보안 그룹 목록을 JSON 형태로 추출할 수 있습니다.

#### 시나리오 C: 비용 절감 스크립트

* **상황:** 사용하지 않는 '고아(Unattached) EBS 볼륨'이 계속 과금되고 있음.
* **CLI 해결:** 상태가 `available`(사용 중이 아님)인 볼륨만 조회하여 삭제하는 스크립트를 작성해 비용 누수를 즉시 차단합니다.

---

### 5. 요약: 웹 콘솔 vs CLI 비교

| 구분 | 웹 콘솔 (Web Console) | CLI (Command Line Interface) |
| --- | --- | --- |
| **접근성** | 높음 (초보자 용이) | 낮음 (학습 필요) |
| **인터페이스** | GUI (그래픽, 마우스) | TUI (텍스트, 키보드) |
| **주요 용도** | 학습, 모니터링, 단발성 작업 | **자동화, 대량 처리, IaC 연동** |
| **재사용성** | 불가능 (매번 클릭해야 함) | **높음 (스크립트로 저장 가능)** |
| **휴먼 에러** | 높음 (클릭 실수) | 낮음 (검증된 코드 실행) |

**결론:**
클라우드 엔지니어에게 **웹 콘솔은 '조회(View)'의 도구**이며, **CLI는 '작업(Action)'과 '건설(Build)'의 도구**입니다. 진정한 클라우드 자동화와 IaC를 구현하기 위해서는 CLI 명령어 체계에 대한 이해가 선행되어야 합니다.

---

Next Step: AWS CLI의 기본 명령어 구조(Command Structure) 이해 및 리소스 조회 실습
