MariaDB에서 데이터베이스 관리자 및 일반 사용자 계정 생성, 권한 부여, DB 및 테이블 생성, 그리고 일반 사용자로 접속하여 기본적인 SQL을 사용하는 방법을 예제와 실전 팁을 포함하여 안내해 드리겠습니다.

-----

## 1\. MariaDB 관리자 접속 및 DB 생성

먼저, `root` 계정으로 MariaDB 쉘에 접속합니다.

```bash
sudo mariadb -u root -p
# 비밀번호 입력
```

### 1.1. 데이터베이스 생성 (DBA 작업)

데이터베이스를 생성하고, 한글 데이터 저장을 위해 **UTF-8 문자 셋**을 지정하는 것이 일반적입니다.

```sql
-- 데이터베이스 생성 (강의록 데이터베이스 예제)
CREATE DATABASE class_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- 생성된 데이터베이스 목록 확인
SHOW DATABASES;
```

-----

## 2\. 사용자 계정 생성 및 권한 부여

데이터베이스 관리 작업은 **`root` 계정 대신** 별도의 **DB 관리자 계정**과 **일반 사용자 계정**을 분리하여 사용해야 보안에 유리합니다.

### 2.1. DB 관리자 계정 생성 및 권한 부여

**`db_admin`** 계정을 생성하고, 모든 데이터베이스에 대한 관리 권한을 부여합니다.

```sql
-- 'db_admin' 계정 생성 (로컬에서만 접속 가능하도록 'localhost'로 지정)
CREATE USER 'db_admin'@'localhost' IDENTIFIED BY 'AdminP@ssw0rd!';

-- 모든 데이터베이스에 대한 모든 권한 부여
GRANT ALL PRIVILEGES ON *.* TO 'db_admin'@'localhost' WITH GRANT OPTION;
```

### 2.2. 일반 사용자 계정 생성 및 권한 부여

**`dev_user`** 계정을 생성하고, 앞서 생성한 \*\*`class_db`\*\*에만 기본적인 **SELECT, INSERT, UPDATE, DELETE** 권한을 부여합니다.

```sql
-- 'dev_user' 계정 생성 (원격 포함 모든 IP에서 접속 가능하도록 '%'로 지정)
CREATE USER 'dev_user'@'%' IDENTIFIED BY 'UserS3cureP@ss!';

-- 특정 DB('class_db')에 대한 CRUD 권한 부여 (실무에선 ALL 대신 필요 권한만 부여)
GRANT SELECT, INSERT, UPDATE, DELETE ON class_db.* TO 'dev_user'@'%';

-- 💡 실전 팁: 권한 변경/부여 후 반드시 실행
FLUSH PRIVILEGES;

-- MariaDB 쉘 종료
EXIT;
```

-----

## 3\. DB 관리자 계정으로 테이블 생성

이제 `dev_user`가 데이터를 CRUD(생성/읽기/수정/삭제)할 수 있는 테이블을 DB 관리자(`db_admin`)가 생성해 보겠습니다.

### 3.1. DB 관리자로 접속

```bash
# 앞서 생성한 'db_admin'으로 접속 시도 (AWS EC2라면 SSH 접속 후 인스턴스 내에서 시도)
mariadb -u db_admin -p
# AdminP@ssw0rd! 입력
```

### 3.2. 테이블 생성 (DBA/개발자 작업)

접속 후, `dev_user`에게 권한을 부여했던 `class_db`를 선택하고 테이블을 생성합니다.

```sql
-- 작업할 데이터베이스 선택
USE class_db;

-- 'students' 테이블 생성 예제
CREATE TABLE students (
    student_id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    major VARCHAR(100),
    enrollment_year YEAR
);

-- 테이블 구조 확인
DESCRIBE students;
```

-----

## 4\. 일반 사용자의 접속 및 기본 SQL 사용

이제 `dev_user`가 데이터베이스에 접속하여 데이터를 조회(SELECT)하는 기본 SQL 작업을 수행합니다.

### 4.1. 일반 사용자 계정으로 접속

```bash
# 앞서 생성한 'dev_user'로 접속 시도 (원격 클라이언트 또는 인스턴스 내에서 시도)
mariadb -u dev_user -h <MariaDB 호스트 IP 또는 localhost> -p
# UserS3cureP@ss! 입력
```

### 4.2. 데이터 삽입 및 기본 SELECT (사용자 작업)

`dev_user`는 테이블 생성 권한은 없지만, 데이터 삽입 및 조회가 가능합니다.

**1) 데이터 삽입 (INSERT)**

```sql
USE class_db;

INSERT INTO students (name, major, enrollment_year) VALUES ('홍길동', '컴퓨터공학', 2023);
INSERT INTO students (name, major, enrollment_year) VALUES ('김철수', '전자공학', 2024);
INSERT INTO students (name, major, enrollment_year) VALUES ('이영희', '정보보호학', 2023);

-- 변경 사항 적용
COMMIT;
```

**2) 전체 데이터 조회 (SELECT)**

```sql
-- 'students' 테이블의 모든 컬럼(*)과 모든 행을 조회
SELECT * FROM students;
```

**3) 조건부 데이터 조회 (SELECT with WHERE)**

```sql
-- 2023년도에 입학한 학생들의 이름과 전공만 조회
SELECT name, major
FROM students
WHERE enrollment_year = 2023;
```

**4) 💡 자주 오해하거나 실수하는 부분**:

  * **대소문자 구분**: MariaDB는 기본적으로 **테이블명은 대소문자를 구분**하지 않지만(리눅스 기준), 컬럼명이나 키워드는 보통 구분하지 않습니다. 하지만 SQL 키워드는 대문자(`SELECT`)로, 테이블/컬럼명은 소문자(혹은 스네이크 케이스)로 작성하는 것이 관례입니다.
  * **세미콜론(;)**: 각 SQL 문장의 끝에는 반드시 세미콜론(;)을 붙여야 합니다.

-----

### 4.3. 📌 최종 점검 사항

| 계정 | 권한 범위 | 역할 |
| :--- | :--- | :--- |
| **`root`** | 서버 전체 관리 (최고 권한) | 서버 설정, 긴급 복구 |
| **`db_admin`** | 모든 DB 관리, 사용자 관리 | DB 생성/삭제, 테이블 구조 변경 |
| **`dev_user`** | 특정 DB에 대한 CRUD | 애플리케이션 개발, 데이터 사용 |

이와 같이 역할을 분리하여 데이터베이스를 운영하는 것이 전문가다운 접근 방식입니다.
