## 하이브리드 멀티 클라우드 표준화 정의서 (Network CIDR 포함)

앞서 정의한 하이브리드 아키텍처에서 **IP 충돌 방지**와 **명확한 서브넷 마스크(Netmask)** 표기를 위해, 각 리소스의 IP 주소 뒤에 **CIDR(Classless Inter-Domain Routing)** 값을 명시하여 재구성한 표준 정의서입니다.

모든 서버는 **`/24` (255.255.255.0)** 서브넷 마스크를 사용하여 각 계층(Web, DB)당 254개의 호스트를 수용할 수 있도록 설계되었습니다.

---

### 1. 글로벌 거버넌스: 버전 및 환경 통일 (Global Governance)

모든 클라우드와 온프레미스에 적용되는 불변의 확정값입니다.

| 분류 | 항목 | **확정 값 (Fixed Value)** | 비고 |
| --- | --- | --- | --- |
| **OS 표준** | 운영체제 | **Ubuntu Server 24.04.1** | 마이너 버전(.1)까지 일치시켜 커널 파편화 방지 |
| **IaC 도구** | Terraform | **v1.9.5** | 테라폼 실행 바이너리 버전 고정 |
| **계정 관리** | 관리자 ID | **`devops-admin`** | 모든 서버 공통 접속 계정 |
| **인증 키** | SSH Key | **`hybrid-master-key.pem`** | 단일 키 파일 사용 (보안 저장소 관리) |
| **명명 규칙** | Naming Rule | **`[위치]-[프로젝트]-[역할]-[순번]`** | 예: `aws-shop-web-001` |

---

### 2. CSP별 리소스 구성 및 IP/CIDR 상세표

각 환경은 **`/16` (65,536개 IP)** 크기의 대역을 가지며, 내부의 각 역할(Role)은 **`/24` (254개 IP)** 크기의 서브넷으로 격리됩니다.

#### 2.1 온프레미스 (On-Premise / IDC)

* **위치 코드:** `idc`
* **전체 네트워크:** `10.0.0.0/16`
* **담당 프로젝트:** 쇼핑몰(`shop`) 메인 시스템

| 리소스 종류 | 리소스 이름 (Hostname) | **할당 IP (CIDR 포함)** | 서브넷 용도 | OS / 엔진 버전 | 스펙 / 유형 |
| --- | --- | --- | --- | --- | --- |
| **Web Server** | **`idc-shop-web-001`** | **10.0.1.10/24** | Web Tier | Ubuntu 24.04.1 | Physical Server |
| **DB Server** | **`idc-shop-db-001`** | **10.0.2.10/24** | DB Tier | MariaDB 10.11.6 | Physical High-Mem |
| **Storage** | **`idc-shop-st-001`** | **10.0.5.10/24** | Storage Tier | TrueNAS Scale 23.10 | NAS Appliance |

---

#### 2.2 AWS (Amazon Web Services)

* **위치 코드:** `aws`
* **전체 네트워크:** `10.10.0.0/16`
* **담당 프로젝트:** 쇼핑몰(`shop`) 트래픽 분산 및 DR

| 리소스 종류 | 리소스 이름 (Name Tag) | **할당 IP (CIDR 포함)** | 서브넷 용도 | OS / 엔진 버전 | 스펙 / 유형 |
| --- | --- | --- | --- | --- | --- |
| **Web Server** | **`aws-shop-web-001`** | **10.10.1.10/24** | Public Subnet | Ubuntu 24.04.1 | EC2 (t3.medium) |
| **DB Server** | **`aws-shop-db-001`** | **10.10.2.10/24** | Private Subnet | MariaDB 10.11.6 | RDS for MariaDB |
| **Storage** | **`aws-shop-st-001`** | (S3 Endpoint) | - | S3 Standard | S3 Bucket |

---

#### 2.3 Azure (Microsoft Azure)

* **위치 코드:** `azr`
* **전체 네트워크:** `10.20.0.0/16`
* **담당 프로젝트:** 데이터 분석(`data`) 및 리포팅

| 리소스 종류 | 리소스 이름 (VM Name) | **할당 IP (CIDR 포함)** | 서브넷 용도 | OS / 엔진 버전 | 스펙 / 유형 |
| --- | --- | --- | --- | --- | --- |
| **Web Server** | **`azr-data-web-001`** | **10.20.1.10/24** | Web Subnet | Ubuntu 24.04.1 | VM (Standard_B2s) |
| **DB Server** | **`azr-data-db-001`** | **10.20.2.10/24** | DB Subnet | PostgreSQL 16.2 | Azure Database |
| **Storage** | **`azr-data-st-001`** | (Blob Endpoint) | - | Blob Storage | Storage Account |

---

#### 2.4 GCP (Google Cloud Platform)

* **위치 코드:** `gcp`
* **전체 네트워크:** `10.30.0.0/16`
* **담당 프로젝트:** 데이터 분석(`data`) 및 AI 학습

| 리소스 종류 | 리소스 이름 (Instance ID) | **할당 IP (CIDR 포함)** | 서브넷 용도 | OS / 엔진 버전 | 스펙 / 유형 |
| --- | --- | --- | --- | --- | --- |
| **Web Server** | **`gcp-data-web-001`** | **10.30.1.10/24** | Web Subnet | Ubuntu 24.04.1 | Compute Engine (e2) |
| **DB Server** | **`gcp-data-db-001`** | **10.30.2.10/24** | DB Subnet | PostgreSQL 16.2 | Cloud SQL |
| **Storage** | **`gcp-data-st-001`** | (GCS Endpoint) | - | GCS Standard | Cloud Storage |

---

### 3. Terraform Provider 버전 고정 (File: `versions.tf`)

협업 및 IaC 배포 안정성을 위해 각 클라우드 Provider의 버전을 정확하게(`=`) 고정합니다.

```hcl
terraform {
  # Terraform 코어 버전 정확히 일치
  required_version = "1.9.5"

  required_providers {
    # AWS Provider 버전 고정
    aws = {
      source  = "hashicorp/aws"
      version = "5.30.0"
    }
    # Azure Provider 버전 고정
    azurerm = {
      source  = "hashicorp/azurerm"
      version = "3.85.0"
    }
    # GCP Provider 버전 고정
    google = {
      source  = "hashicorp/google"
      version = "5.10.0"
    }
  }
}

```

---

Next Step: Windows 환경에서 SSH 클라이언트(PuTTY 또는 CMD)를 이용하여 생성한 EC2 인스턴스에 원격 접속하기
