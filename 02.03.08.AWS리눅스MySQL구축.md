AWS **EC2 Ubuntu 인스턴스**에 **MySQL**을 구축하는 절차를 IT 전문가로서의 관점과 실전 팁을 포함하여 안내해 드리겠습니다. 💡

-----

## 1\. AWS EC2 인스턴스 준비 및 접속

가장 먼저, MySQL 데이터베이스를 설치할 환경을 준비합니다.

### 1.1. EC2 인스턴스 생성 및 보안 그룹 설정

**AWS 콘솔**에서 **Ubuntu Server** 최신 버전을 선택하여 EC2 인스턴스를 생성합니다.

  * **⚠️ 실전 팁: 보안 그룹 설정 (매우 중요)**
      * 인스턴스 생성 시 **보안 그룹(Security Group)** 설정을 잊지 마세요.
      * **SSH (Port 22)**: 접속을 위해 `My IP` 또는 특정 IP 범위로 열어둡니다.
      * **MySQL/Aurora (Port 3306)**: MySQL 클라이언트 접속을 위해 이 포트를 열어야 합니다. **외부에서 접속**할 계획이라면 해당 클라이언트의 IP 주소 또는 서비스가 접근할 IP 범위로 설정해야 합니다. **최소한의 원칙**을 지켜 `0.0.0.0/0` (모든 IP 허용)은 **절대 피해야** 합니다.
      * **자주 오해하거나 실수하는 부분**: 인스턴스에 MySQL을 설치했더라도 보안 그룹에서 3306 포트를 열어주지 않으면 외부에서 접속이 불가능합니다. 이는 OS 방화벽(UFW)과는 별개의 AWS 계층 보안입니다.

### 1.2. 인스턴스 접속

생성된 인스턴스의 **퍼블릭 IP 주소**와 **Key Pair**를 사용하여 SSH로 접속합니다.

```bash
ssh -i /path/to/your/key.pem ubuntu@<EC2 퍼블릭 IP>
```

-----

## 2\. MySQL 설치 및 초기 설정

이제 인스턴스 환경에서 MySQL 서버를 설치하고 초기 보안 설정을 진행합니다.

### 2.1. 패키지 업데이트 및 MySQL 설치

시스템 패키지 목록을 최신으로 업데이트하고 MySQL 서버를 설치합니다.

```bash
# 패키지 목록 업데이트
sudo apt update

# MySQL 서버 설치
sudo apt install mysql-server -y
```

### 2.2. MySQL 서비스 확인

설치가 완료되면 MySQL 서비스가 정상적으로 실행 중인지 확인합니다.

```bash
sudo systemctl status mysql
```

*(출력 결과에서 `active (running)`을 확인)*

### 2.3. MySQL 보안 설정 (`mysql_secure_installation`)

설치 직후 **보안 강화**를 위해 이 스크립트를 실행하는 것이 필수입니다.

```bash
sudo mysql_secure_installation
```

  * **실행 시 주요 설정 내용:**
      * **VALIDATE PASSWORD COMPONENT**: 암호 복잡성 정책 설정 (선택 사항, 보통 Medium 권장)
      * **Root Password 설정**: 루트 사용자의 비밀번호 설정
      * **Remove anonymous users?**: 익명 사용자 제거 (✅ Yes)
      * **Disallow root login remotely?**: 원격에서 root 접속 차단 (✅ Yes 권장, 보안 강화)
      * **Remove test database and access to it?**: 테스트 DB 제거 (✅ Yes)
      * **Reload privilege tables now?**: 권한 테이블 새로고침 (✅ Yes)

-----

## 3\. 원격 접속 허용을 위한 설정

기본적으로 MySQL은 로컬 접속만 허용하도록 설정되어 있습니다. AWS 외부나 다른 EC2 인스턴스에서 접속하려면 설정을 변경해야 합니다.

### 3.1. 바인드 주소 (Bind Address) 변경

MySQL 설정 파일(`mysqld.cnf`)을 수정하여 외부 접속을 허용합니다.

```bash
sudo nano /etc/mysql/mysql.conf.d/mysqld.cnf
```

파일 내에서 `bind-address` 항목을 찾아 아래와 같이 수정합니다.

```ini
# 주석 처리 또는 127.0.0.1 대신 0.0.0.0으로 변경
# bind-address            = 127.0.0.1
bind-address            = 0.0.0.0
```

  * **💡 실전 팁**: `0.0.0.0`은 모든 IP 주소에서의 접속을 허용합니다. 만약 특정 내부 네트워크 IP에서만 접속하게 하려면 해당 IP로 설정할 수 있습니다.

변경 후, MySQL 서비스를 재시작합니다.

```bash
sudo systemctl restart mysql
```

### 3.2. 원격 접속용 사용자 계정 생성 및 권한 부여

보안상 root 계정으로 원격 접속하는 것은 좋지 않으므로, 원격 접속 전용 사용자 계정을 생성하고 필요한 데이터베이스에만 권한을 부여합니다.

MySQL 쉘에 접속합니다.

```bash
sudo mysql -u root -p
```

*(앞서 설정한 root 비밀번호 입력)*

```sql
-- 새로운 사용자 생성 및 모든 IP에서 접속 허용 (%)
CREATE USER 'myuser'@'%' IDENTIFIED BY 'MyStrongPassword!';

-- (선택 사항) 특정 IP에서만 접속을 허용하려면:
-- CREATE USER 'myuser'@'192.168.1.100' IDENTIFIED BY 'MyStrongPassword!';

-- 'testdb' 데이터베이스에 myuser에게 모든 권한 부여
GRANT ALL PRIVILEGES ON testdb.* TO 'myuser'@'%';

-- 모든 데이터베이스에 모든 권한을 부여하는 경우 (권장하지 않음)
-- GRANT ALL PRIVILEGES ON *.* TO 'myuser'@'%';

-- 권한 테이블 새로고침 적용
FLUSH PRIVILEGES;

-- 쉘 종료
EXIT;
```

-----

## 4\. 최종 확인 및 점검

### 4.1. 외부 접속 테스트

이제 로컬 PC의 MySQL 클라이언트(DBeaver, MySQL Workbench 등)를 사용하여 EC2 인스턴스의 **퍼블릭 IP**와 설정한 **myuser** 계정으로 접속을 시도해봅니다.

### 4.2. 📌 보안 점검 (IT 전문가의 마무리)

| 점검 사항 | 내용 | 중요도 |
| :--- | :--- | :--- |
| **AWS 보안 그룹** | 3306 포트가 **필요한 IP**만 허용하는지 확인 (`0.0.0.0/0` 방지) | 높음 |
| **MySQL Bind Address** | `0.0.0.0`으로 변경되어 있는지 확인 (원격 접속을 위해) | 중간 |
| **사용자 권한** | root 계정의 원격 접속이 막혔는지, 일반 사용자가 **최소한의 권한**만 가졌는지 확인 | 높음 |
| **비밀번호 복잡성** | 설정한 비밀번호가 복잡하고 안전한지 재확인 | 높음 |

이 과정을 통해 안전하고 효율적인 AWS Ubuntu 기반 MySQL 환경 구축을 완료할 수 있습니다.
