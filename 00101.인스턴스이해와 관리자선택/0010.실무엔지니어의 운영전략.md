실무(중견/대기업) 환경에서의 EC2 패밀리별 운영 전략과 클러스터링(Clustering) 시 이기종 혼합 구성 여부에 대한 심층 분석 내용을 강의 교재 형식으로 작성하였습니다.

---

# 엔터프라이즈 환경의 인스턴스 선택 및 클러스터 운영 전략

## 1. 실무 엔지니어의 인스턴스 패밀리별 인식 및 선택 기준

대규모 트래픽을 처리하는 엔터프라이즈 환경에서는 단순히 스펙만 보고 인스턴스를 고르지 않는다. 각 패밀리는 명확한 **'담당 보직'**이 정해져 있으며, 이를 벗어난 사용은 비효율이나 장애의 원인으로 간주된다.

| 패밀리 | 실무 별칭 및 인식 | 주요 보직 (Use Case) | 운영 코멘트 (Field Notes) |
| --- | --- | --- | --- |
| **T 계열**<br>

<br>(T3, T4g) | **"샌드박스 & 유틸리티"** | • 개발/QA 서버<br>

<br>• Bastion Host<br>

<br>• 사내 Admin 툴 | • **Production 금기:** 메인 트래픽을 받는 상용 서버로는 거의 쓰지 않는다. 크레딧 고갈로 인한 성능 저하 리스크를 감수하지 않기 때문.<br>

<br>• **예외:** 트래픽이 간헐적인 배치(Batch) 서버에는 T3 Unlimited를 켜고 투입하기도 한다. |
| **M 계열**<br>

<br>(M6i, M7g) | **"표준(Standard) & 1군"** | • WAS (Tomcat, Node.js, Django)<br>

<br>• 마이크로 서비스(MSA) 컨테이너 노드 | • **결정 장애 해결사:** 어떤 인스턴스를 쓸지 모르겠다면 무조건 M으로 시작한다. 가장 밸런스가 좋아 모니터링 후 튜닝하기 좋다.<br>

<br>• CPU와 메모리 사용률이 비슷하게 올라가는 일반적인 앱에 적합하다. |
| **C 계열**<br>

<br>(C6i, C7g) | **"연산 깡패"** | • 고성능 웹 서버 (Nginx, Apache)<br>

<br>• 미디어 트랜스코딩, 암호화 처리<br>

<br>• 광고 입찰(RTB) 서버 | • **M에서 C로 이동:** M계열을 쓰다가 "메모리는 널널한데 CPU만 90% 치는" 현상이 발견되면 C계열로 교체하여 비용을 절감한다.<br>

<br>• **Batch:** 빠른 처리가 생명인 데이터 가공 작업에 필수적이다. |
| **R 계열**<br>

<br>(R6i, R7g) | **"DB 그 자체"** | • **RDBMS (MySQL, PostgreSQL)**<br>

<br>• In-Memory Cache (Redis, Memcached) | • **DB 국룰:** DB는 CPU보다 메모리 용량이 병목의 주원인이다. 따라서 DB 서버는 무조건 R계열로 잡는 것이 불문율이다.<br>

<br>• **빅데이터:** Spark 등 메모리에 데이터를 올리는 분석 작업에 쓰인다. |
| **Graviton**<br>

<br>(..g 시리즈) | **"가성비 치트키"** | • 위 모든 용도 (단, 호환성 검증 후) | • **최신 트렌드:** Intel(x86) 대비 약 20% 저렴하고 성능은 동등 이상이다. Java, Python 등 언어 레벨에서 아키텍처를 타지 않는 앱은 **'g' 시리즈(예: m6g.large)로 전면 교체**하는 추세다. |

---

## 2. 클러스터 구성 시 이기종(Heterogeneous) 혼합 여부

서버를 여러 대 묶어 클러스터(Cluster)나 오토 스케일링 그룹(ASG)을 구성할 때, 서로 다른 인스턴스 타입을 섞어 쓰는 것이 가능한지, 그리고 실무에서는 어떻게 하는지에 대한 분석이다.

### 2.1 기술적 가능 여부: **"가능하다 (Possible)"**

AWS의 **Auto Scaling Group(ASG)**이나 **EKS(Kubernetes)**, **Spot Fleet** 기능은 기술적으로 여러 인스턴스 타입(예: `m5.large`와 `c5.large` 혼합)을 하나의 그룹으로 묶어 운영하는 것을 완벽하게 지원한다.

### 2.2 실무 운영 전략: 워크로드에 따른 구성 방식

실무에서는 **"관리의 복잡도"** vs **"비용/가용성 최적화"** 사이에서 저울질하여 구성을 결정한다.

#### A. 웹/애플리케이션 서버 (Web/WAS)

* **On-Demand 사용 시:** **동일 기종(Homogeneous) 구성 권장**
* **이유:** 로드 밸런서(ALB)는 기본적으로 라운드 로빈(Round Robin) 방식으로 트래픽을 균등하게 분배한다. 서버 스펙이 다르면(예: 하나는 빠르고 하나는 느리면), 느린 서버에 요청이 쌓여 전체 응답 속도의 편차(Jitter)가 발생하고 모니터링이 어려워진다.
* **운영:** 보통 `m5.large` 단일 모델로 통일한다.


* **Spot Instance 사용 시:** **[💰비용 절감 핵심]** **이기종(Heterogeneous) 혼합 필수**
* **이유:** 스팟 인스턴스는 AWS의 남는 자원을 싸게 쓰는 것이다. 특정 타입(예: `m5.large`) 재고가 떨어져 회수당할 때, 다른 타입(예: `m4.large`, `c5.large`, `r5.large`)으로 즉시 대체하여 **서비스 중단을 막기 위해** 의도적으로 여러 타입을 섞는다.
* **설정:** ASG 설정에서 **'용량 최적화(Capacity Optimized)'** 전략을 사용하여 "CPU 2코어, 램 8GB 이상인 놈은 다 가져와" 식으로 구성한다.



#### B. 쿠버네티스 (EKS) 환경

* **Node Group 분리 전략:**
* **일반 앱:** 범용성 높은 M 계열 위주로 구성.
* **고성능 앱:** C 계열 노드 그룹을 별도로 만들고 `NodeSelector`나 `Taint/Toleration`을 통해 특정 파드(Pod)만 배치한다.
* **결론:** 하나의 노드 그룹 내에서는 동일 기종을 쓰되, 클러스터 전체로는 목적에 따라 이기종 그룹을 여러 개 운영한다.



#### C. 데이터베이스 (DB) 및 Stateful 서버

* **전략:** **엄격한 동일 기종(Homogeneous) 구성**
* **이유:** Master(Primary) DB는 `r5.2xlarge`인데, Slave(Replica) DB가 `r5.large`라면? Slave가 Master의 쓰기 속도를 따라가지 못해 **복제 지연(Replication Lag)**이 발생하고, Failover(장애 조치) 시 성능이 급격히 저하되어 서비스가 마비된다.
* **원칙:** **Master와 Slave는 반드시 1:1 동일 스펙**으로 맞춘다.

---

## 3. 요약 및 실무 모범 사례 (Best Practices)

1. **DB는 무조건 R 시리즈:** 메모리가 깡패다. T나 C 시리즈로 DB를 운영하다 장애가 나면 아키텍처 설계 실수로 간주된다.
2. **스팟 인스턴스는 '잡식성'으로:** 스팟을 쓸 때는 인스턴스 타입을 5~10개 이상 섞어라. 그래야 AWS 리전(Region) 전체의 재고 부족 사태가 아니면 서버가 꺼지지 않는다.
3. **Graviton(ARM) 적극 도입:** 실무에서는 비용 절감(약 20%)을 위해 x86 기반(Intel/AMD)에서 ARM 기반(Graviton) 인스턴스로 대거 이동 중이다. (예: `m5.large` → `m6g.large`)
4. **애플리케이션은 획일화:** 일반적인 웹 서버 그룹은 관리 편의성을 위해 동일 타입을 쓴다. 성능 이슈 발생 시 "어떤 놈은 스펙이 달라서"라는 변수를 제거하기 위함이다.

---



# 실무에서의 T2, T3 인스턴스 인식 및 운영 전략

## 1. 실무 엔지니어들의 일반적 인식

IT 인프라 및 DevOps 현업에서 T 시리즈(T2, T3)는 **"비용 효율성은 최고지만, 메인 프로덕션(Production) 용도로는 신중해야 하는 인스턴스"**로 통한다.

* **개발/테스트 환경의 표준:** 개발 서버, 스테이징 서버, QA 환경 등 트래픽이 간헐적인 곳에서는 **기본(Default)**으로 사용된다.
* **프로덕션 기피 경향:** 서비스의 안정성이 최우선인 메인 웹 서버나 DB 서버로는 T 시리즈보다는 **M(범용) 또는 C(컴퓨팅)** 패밀리를 선호한다. "몇 푼 아끼려다 서비스 느려져서 장애 전파(Cascading Failure) 나면 책임 소재가 불분명해진다"는 인식이 강하다.

---

## 2. T2 vs T3 세대 교체 및 운영 현황

### 2.1 T2: "레거시(Legacy)" 취급

* **신규 구축 시 배제:** 현재 시점에서 신규 프로젝트에 T2를 선택하는 엔지니어는 거의 없다. 가성비, 성능, 네트워크 대역폭 모든 면에서 T3(또는 T3a, T4g)가 압도적이기 때문이다.
* **레거시 유지보수:** 기존에 T2로 돌아가던 서버들도 예약 인스턴스(RI) 계약이 만료되는 시점에 맞춰 T3로 마이그레이션(Change Instance Type)하는 것이 일반적인 추세다.

### 2.2 T3: "사실상의 표준(De Facto Standard)"

* **범용성:** 트래픽이 적은 소규모 서비스, 사내 도구(Internal Tools), 배치 잡(Batch Job) 서버로 가장 널리 쓰인다.
* **운영 포인트:** T3는 성능보다는 **'비용 통제(Cost Control)'** 관점에서 관리된다.

---

## 3. 실무 운영 가이드: T3 Unlimited Mode 설정 전략

실무에서 T3 운영의 핵심은 **`Unlimited Mode`를 켜느냐 끄느냐**에 달려 있다. 이는 요금 폭탄을 막기 위한 가장 중요한 결정 포인트다.

| 환경 (Environment) | 권장 모드 (Mode) | 운영 전략 및 이유 |
| --- | --- | --- |
| **개발/테스트 서버**<br>

<br>(Dev/Test/Stage) | **Standard Mode**<br>

<br>(Unlimited 끔) | **"성능이 느려져도 요금은 안 나오게"**<br>

<br>개발자가 실수로 무한루프를 돌리거나 부하 테스트를 걸어도 추가 과금 **[💰Surplus Credit]**이 발생하지 않도록 강제로 성능을 제한시킨다. |
| **상용 서비스**<br>

<br>(Production) | **Unlimited Mode**<br>

<br>(Unlimited 켬) | **"요금이 더 나와도 서비스는 죽지 않게"**<br>

<br>갑작스러운 트래픽 폭주 시, 추가 요금을 내더라도 서비스 응답 속도를 유지하는 것이 비즈니스적으로 이득이다. 단, 예산 모니터링이 필수다. |

---

## 4. T 계열이 주로 사용되는 실제 아키텍처 위치

실무 아키텍처 다이어그램에서 T 인스턴스가 배치되는 전형적인 위치는 다음과 같다.

1. **배스천 호스트 (Bastion Host / Jump Server):**
* 엔지니어가 프라이빗 서브넷에 접속하기 위한 통로 역할.
* 실제 트래픽을 처리하지 않고 SSH 접속만 대기하므로 CPU 사용량이 거의 없다. **t3.nano** 또는 **t3.micro**가 국룰(불문율)처럼 쓰인다.


2. **어드민/관리자 페이지 (Back-office):**
* 내부 직원 소수만 접속하므로 트래픽이 예측 가능하고 낮다.


3. **CI/CD 러너 (Jenkins Agent 등):**
* 빌드나 배포가 없을 때는 놀고(Idle), 빌드할 때만 CPU를 쓴다. T 시리즈의 크레딧 적립 구조와 완벽하게 부합한다.


4. **로그 수집기/모니터링 에이전트:**
* 단순히 데이터를 퍼 나르는 경량 작업에 적합하다.



---

## 5. T 시리즈 탈출 기준 (When to Upgrade)

운영 중인 T 인스턴스를 언제 M(General Purpose) 계열로 올려야 할까? 실무에서는 다음 징후가 보이면 즉시 인스턴스 타입 변경을 고려한다.

1. **Baseline 평균 초과:** CPU 사용률이 하루 종일 베이스라인(예: t3.medium 기준 20%)을 넘나들 때. 크레딧이 쌓일 틈이 없으므로 T를 쓰는 의미가 없다.
2. **크레딧 고갈 빈도:** CloudWatch의 `CPUCreditBalance`가 자주 0을 찍거나, `CPUSurplusCreditsCharged` **[💰추가 과금]** 지표가 지속적으로 발생하여 월 비용이 M 인스턴스 비용에 육박할 때.
3. **네트워크 병목:** T 시리즈는 네트워크 대역폭이 'Low to Moderate' 등으로 가변적이다. 안정적인 네트워크 처리량이 필요할 때는 M5 또는 C5로 이동한다.

---

Next Step: CloudWatch Metrics for EC2 (CPU, Disk, Network Monitoring)
