말씀하신 표 작성 방식을 기억하겠습니다. 지적해주신 대로 깃허브 마크다운 호환성을 위해 표 내부의 줄바꿈 방식을 수정하여 다시 작성했습니다.

---

# 클러스터(Cluster) 심층 분석: 구조 및 작동 원리

## 1. 클러스터(Cluster)의 정의

**클러스터(Cluster)**란 여러 대의 컴퓨터(노드, Node)를 서로 연결하여 **마치 '하나의 거대한 시스템'처럼 동작하게 만드는 기술**을 의미한다.

* **Single System Image (SSI):** 사용자는 클러스터 내부가 몇 대의 서버로 구성되어 있는지 알 필요가 없으며, 논리적으로 하나의 컴퓨터를 사용하는 것처럼 서비스를 이용한다.
* **목적:** 단일 서버로는 달성하기 힘든 **고가용성(High Availability)**, **고성능(High Performance)**, **부하 분산(Load Balancing)**을 구현하기 위함이다.

---

## 2. 클러스터의 핵심 구조 (Architecture)

클러스터는 단순히 선을 연결한다고 작동하지 않는다. 하드웨어와 이를 제어하는 소프트웨어(Cluster Manager)가 유기적으로 결합되어야 한다.

| 구성 요소 | 역할 및 설명 |
| --- | --- |
| **노드 (Node)** | 클러스터를 구성하는 개별 서버. (Master/Leader: 관리 노드, Worker/Slave: 작업 노드) |
| **인터커넥트 (Interconnect)** | 노드 간의 통신을 담당하는 **전용 사설 네트워크**. 일반 트래픽과 분리하여 내부 통신(Heartbeat)용으로 사용. |
| **공유 스토리지 (Shared Storage)** | **[중요]** 모든 노드가 접근 가능한 데이터 저장소 (SAN, NAS, EBS Multi-Attach). 장애 발생 시 데이터 유지를 위해 필수. |
| **클러스터 매니저 (Cluster Manager)** | 각 노드에 설치되어 상태를 감시하고 장애 발생 시 대응하는 소프트웨어. (예: Pacemaker, Kubernetes) |
| **VIP (Virtual IP)** | 클라이언트가 접속하는 **가상 IP 주소**. 실제 서버 IP가 바뀌더라도 접속 단절을 최소화함. |

---

## 3. 작동 원리 (Mechanism)

클러스터가 '죽지 않는 시스템'이 되는 과정은 다음 4단계 메커니즘으로 설명된다.

### 3.1 하트비트 (Heartbeat) - "생존 신고"

* 노드들은 서로 주기적으로(보통 1~2초 단위) 아주 작은 데이터 패킷을 주고받는다.
* **"나 살아있어"**라는 신호를 인터커넥트망을 통해 지속적으로 송신한다.
* 만약 특정 노드로부터 정해진 시간 동안 하트비트가 오지 않으면, 해당 노드를 **'사망(Dead)'** 상태로 간주하고 격리(Fencing) 절차에 들어간다.

### 3.2 페일오버 (Failover) - "권한 이양"

* Master 노드 혹은 Active 노드에 장애가 감지되면, 대기 중이던 Standby 노드가 즉시 그 역할을 이어받는다.
* **VIP 이동:** 기존 Active 노드가 가지고 있던 VIP를 Standby 노드가 자신의 네트워크 인터페이스에 할당(Takeover)한다.
* **결과:** 사용자는 찰나의 끊김만 느낄 뿐, 서버가 바뀐 사실을 인지하지 못하고 계속 서비스를 이용한다.

### 3.3 쿼럼 (Quorum) - "의사 결정과 스플릿 브레인 방지"

* 네트워크 장애로 노드 간 통신이 끊겼을 때, 서로가 "내가 대장이다"라고 주장하는 **스플릿 브레인(Split-brain)** 현상을 막기 위한 다수결 원칙이다.
* 전체 노드의 과반수 이상(N/2 + 1)이 정상 동작하는 그룹만 살아남고, 나머지는 스스로 서비스를 중단(Self-fencing)하여 데이터 오염을 막는다.

### 3.4 데이터 동기화 (Sync)

* **Shared Disk 방식:** 모든 노드가 하나의 거대한 외장 디스크를 바라본다. (Oracle RAC 등)
* **Shared Nothing 방식:** 각자 로컬 디스크를 쓰되, 소프트웨어적으로 실시간 복제를 수행한다. (MySQL Replication, Elasticsearch 등)

---

## 4. 클러스터의 종류 (목적별 분류)

실무에서는 목적에 따라 크게 세 가지 유형으로 구축한다.

### 4.1 고가용성 클러스터 (HA Cluster: High Availability)

* **목적:** "절대 죽지 않는 서비스" (무중단 운영)
* **구성:** Active-Standby 구조.
* **작동:** 평소에는 1대만 일하고 나머지는 대기하다가, 장애 시 교대.
* **예시:** DB 서버 (Oracle RAC, MSSQL Failover Cluster), AWS Multi-AZ.

### 4.2 부하 분산 클러스터 (LBC: Load Balancing Cluster)

* **목적:** "트래픽 나누기" (성능 확장)
* **구성:** Active-Active 구조.
* **작동:** 앞단에 로드 밸런서(L4/L7 스위치)가 있고, 뒤에 여러 대의 서버가 동시에 트래픽을 나눠서 처리.
* **예시:** 웹 서버 팜(Web Server Farm), AWS Auto Scaling Group.

### 4.3 고성능 연산 클러스터 (HPC: High Performance Computing)

* **목적:** "슈퍼 컴퓨터" (복잡한 연산)
* **작동:** 거대한 연산 작업을 잘게 쪼개어 수백~수천 대의 노드가 병렬로 처리 후 결과를 취합.
* **예시:** 기상 예측, 유전체 분석, AI 모델 학습, 렌더링 팜.

---

## 5. 실무 관점: 가상화/클라우드 시대의 클러스터

과거에는 물리적인 케이블 연결이 중요했으나, 클라우드 시대(AWS 등)에는 개념이 소프트웨어적으로 진화했다.

* **물리적 제약 해소:** 과거엔 같은 랙(Rack)에 있어야 했으나, 지금은 **가용 영역(AZ)**을 달리하여 지리적으로 떨어진 클러스터를 구성한다. (재해 복구 능력 강화)
* **EC2 Auto Scaling:** 가장 대표적인 '부하 분산 클러스터'의 현대적 구현체이다.
* **Kubernetes (EKS):** 컨테이너 기반의 애플리케이션을 위한 거대한 'OS' 역할을 하는 현대적 클러스터 매니저이다. **[💰EKS Control Plane 과금 발생]**

---

Next Step: Load Balancer Architecture (L4 vs L7 & ELB Types)
