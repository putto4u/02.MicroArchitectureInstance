AWS에서 여러 개의 VPC를 연결할 때 가장 중요한 고려 사항 중 하나는 **VPC Peering(1:1 연결)**과 **Transit Gateway(허브 앤 스포크)** 간의 비용 차이입니다.

단순히 연결의 편리함만 보는 것이 아니라, 데이터 처리량과 VPC 개수에 따라 어떤 방식이 경제적인지 분석해야 합니다.

---

## 1. VPC Peering (1:1 연결 방식)

VPC 피어링은 직접적인 점대점(Point-to-Point) 연결로, 별도의 관리 장치가 없기 때문에 **고정비가 없습니다.**

* **시간당 요금:** **$0.00 (없음)**
* **데이터 전송 요금:**
* **동일 가용 영역(AZ) 내:** 무료
* **다른 가용 영역(Inter-AZ) 간:** **GB당 $0.01** (송신/수신 각각 발생 가능)


* **특징:** VPC 개수가 적고 데이터 전송량이 많지 않을 때 가장 저렴합니다.

---

## 2. Transit Gateway (허브 앤 스포크 방식)

Transit Gateway(TGW)는 중앙 집중식 허브로 모든 VPC를 관리합니다. 관리 편의성은 높지만 **시간당 요금과 처리 비용이 모두 발생**합니다.

* **시간당 요금 (Attachment 비용):** **VPC당 시간당 $0.05** (한 달 기준 약 $36/VPC)
* **데이터 처리 요금:** **GB당 $0.02** (VPC 피어링보다 데이터 처리 단가가 비쌉니다.)
* **특징:** VPC 개수가 수십 개 이상으로 늘어나 관리 복잡도를 줄여야 할 때 사용합니다.

---

## 3. 비용 비교 요약 (서울 리전 기준 예상)

2개의 VPC를 연결하여 한 달(720시간) 동안 100GB의 데이터를 서로 다른 AZ 간에 주고받는다고 가정할 때의 비교입니다.

| 항목 | VPC Peering | Transit Gateway |
| --- | --- | --- |
| **연결/시간 요금** | $0 | $0.10 / hour ($0.05 × 2개 VPC) |
| **월 고정 비용** | $0 | **$72.00** |
| **데이터 처리 비용** | $2.00 ($0.02/GB - 송수신 합산 시) | **$2.00** ($0.02/GB) |
| **월 총 예상 비용** | **$2.00** | **$74.00** |

> **[과금 핵심 포인트]**
> * **VPC 3개 이하:** 무조건 **VPC Peering**이 저렴합니다.
> * **데이터 전송량이 많을수록:** Transit Gateway는 데이터 처리 비용($0.02/GB)이 추가되므로 전송량이 커질수록 피어링과의 비용 격차가 더 벌어집니다.
> * **관리가 우선인 경우:** 비용을 더 지불하더라도 수백 개의 피어링 연결을 관리하는 인건비보다 TGW의 편리함이 더 클 때 선택합니다.
> 
> 

---

## 4. 결론: 언제 무엇을 써야 할까?

* **VPC Peering을 선택해야 하는 경우:**
* 연결할 VPC가 2~3개 정도로 적을 때
* 고정 비용(시간당 요금)을 한 푼이라도 아끼고 싶을 때
* 단순한 테스트 환경일 때


* **Transit Gateway를 선택해야 하는 경우:**
* 연결해야 할 VPC가 10개 이상으로 늘어나 라우팅 관리가 불가능할 때
* 온프레미스(VPN/Direct Connect)와 여러 VPC를 한꺼번에 묶어야 할 때
* 보안 및 트래픽 제어를 중앙에서 한 번에 하고 싶을 때



Next Step: Transit Gateway를 이용한 다중 VPC 라우팅 통합 실습

---

AWS Transit Gateway(TGW)를 이용한 허브 앤 스포크 구조는 생성하고 테스트 후 **바로 삭제하더라도 사용한 시간에 비례하여 비용이 발생**합니다. AWS의 대부분의 리소스와 마찬가지로 '초 단위' 또는 '시간 단위' 과금 체계를 따르기 때문입니다.

---

## 1. Transit Gateway 삭제 시 과금 분석

Transit Gateway를 생성하고 테스트한 뒤 삭제할 때 발생하는 구체적인 비용 항목은 다음과 같습니다.

### 1) TGW 연결(Attachment) 시간 요금

* **과금 방식:** Transit Gateway에 VPC를 연결한 시점부터 삭제(Delete)한 시점까지 계산됩니다.
* **비용:** 서울 리전 기준, **VPC 연결당 시간당 $0.05**입니다.
* **최소 과금:** 1시간 미만으로 사용하더라도 최소 1시간 요금이 부과될 수 있습니다. (테스트를 위해 2개의 VPC를 연결했다면, 생성 즉시 약 **$0.10** 정도의 비용이 발생하기 시작합니다.)

### 2) 데이터 처리 요금

* **과금 방식:** 테스트 과정에서 VPC 간에 주고받은 데이터의 총량에 따라 부과됩니다.
* **비용:** **GB당 $0.02**입니다.
* **특이사항:** 아주 소량의 핑(Ping) 테스트나 간단한 HTTP 호출만 했다면 데이터 처리 비용은 거의 무시할 수 있는 수준(Cent 단위)입니다.

---

## 2. 주의: 삭제 시 '완전 정리' 프로세스

Transit Gateway는 단순히 TGW 본체만 삭제한다고 해서 모든 비용이 멈추지 않을 수 있습니다. 반드시 아래 순서대로 삭제해야 깔끔하게 자원이 정리됩니다.

1. **VPC Attachments 삭제:** 먼저 TGW에 연결된 각 VPC 연결(Attachment)을 삭제해야 합니다. (이 연결이 남아있으면 시간당 비용이 계속 발생합니다.)
2. **Transit Gateway 삭제:** 연결이 모두 해제된 후 TGW 본체를 삭제합니다.
3. **라우팅 테이블 복구:** VPC 라우팅 테이블에 수동으로 추가했던 TGW 향(Target: tgw-xxx) 경로들을 삭제하거나 정리해야 합니다. (이는 직접적인 과금 요인은 아니나, 네트워크 통신 오류를 방지하기 위함입니다.)

---

## 3. 요약 및 제언

* **비용 발생 여부:** **YES.** 비록 소액이지만 사용한 시간에 대해 비용이 청구됩니다.
* **프리티어 적용 여부:** **NO.** Transit Gateway는 AWS 프리티어에 포함되지 않는 **유료 서비스**입니다. 생성하는 순간부터 과금이 시작됩니다.
* **결론:** 실습을 위해 잠시 생성하는 것은 큰 비용(몇 백 원 단위)이 들지 않지만, **삭제를 깜빡하고 하루 이틀 방치할 경우** 연결된 VPC 개수에 따라 생각보다 많은 비용이 청구될 수 있으니 주의가 필요합니다.

> **[과금 경고]** > Transit Gateway 및 관련 Attachment는 생성 즉시 **시간당 $0.05(연결당)**의 요금이 발생하므로, 실습 종료 후 반드시 'VPC Attachments' 메뉴에서 연결을 먼저 삭제한 뒤 TGW를 제거하시기 바랍니다.

Next Step: Transit Gateway 삭제 후 과금 여부를 확인하는 AWS Cost Explorer 사용법

---

개인별 설정에 따라 깃허브 마크다운 포맷으로 작성하였으며, TGW가 프리티어 제외 대상임을 명시하고 시간당 과금 포인트를 정확히 짚어드렸습니다.

Next Step: 비용 모니터링 방법
