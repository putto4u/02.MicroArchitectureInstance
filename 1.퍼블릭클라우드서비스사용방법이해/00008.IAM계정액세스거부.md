root로 로그인 후 예시로 putto라는 IAM 계정을 만들고 모든(?)권한을 부여한 후,
putto로 로그인 했더니, 콘솔에선 여러가지가 액세스 거부로 나타납니다.

## IAM 사용자(putto)의 액세스 거부 및 결제 화면 보이지 않는 원인과 해결

Root 계정에서 IAM 사용자(`putto`)에게 '모든 권한'을 주었다고 생각했지만, 막상 로그인해보면 권한 부족 오류가 뜨는 가장 큰 이유는 **두 가지**입니다.

1. **결제 정보 접근 권한:** AWS는 보안상의 이유로 **Root 계정에서 별도의 승인 스위치를 켜주지 않으면, 관리자(Admin) 권한을 가진 IAM 사용자라도 결제 정보를 볼 수 없습니다.**
2. **정책 연결 실수:** '모든 권한'을 준다는 것이 수동으로 선택하다가 `AdministratorAccess`가 아닌 다른 정책(예: `PowerUserAccess`)을 주었거나, 저장이 제대로 안 된 경우입니다.

---

### 1. 결제(Billing) 데이터가 안 보이는 문제 해결 (가장 중요)

IAM 사용자가 "내 결제 대시보드"나 "청구서"를 보려고 할 때 `Access Denied`가 뜬다면, 이것은 IAM 정책 문제가 아니라 **Root 계정의 설정 문제**입니다. 반드시 Root 계정으로 로그인하여 아래 설정을 변경해야 합니다.

#### [Root 계정 작업] IAM 결제 데이터 접근 허용 절차

1. **Root 계정**으로 로그인합니다.
2. 우측 상단 **[계정 이름]**을 클릭하고 **[계정(Account)]** 메뉴로 들어갑니다.
3. 페이지를 아래로 스크롤 하여 **[IAM 사용자 및 역할의 결제 정보 액세스(IAM User and Role Access to Billing Information)]** 섹션을 찾습니다.
4. 우측의 **[편집(Edit)]** 버튼을 누릅니다.
5. **[IAM 액세스 활성화(Activate IAM Access)]**에 체크하고 **[업데이트(Update)]**를 누릅니다.

> **결과:** 이 스위치를 켜야만 IAM 사용자(`putto`)가 `Billing` 관련 권한을 정상적으로 행사할 수 있습니다.

---

### 2. 콘솔 전반적인 액세스 거부 해결 (정책 재확인)

결제 정보 외에 EC2, S3 등 일반 서비스 메뉴에서도 빨간색 경고창(API Error, Access Denied)이 뜬다면, `putto` 계정에 **`AdministratorAccess`** 정책이 제대로 연결되지 않은 것입니다.

#### [Root 계정 작업] IAM 권한 재할당

1. IAM 콘솔(`Identity and Access Management`)로 이동합니다.
2. 좌측 메뉴 **[사용자(Users)]** > **`putto`** 클릭.
3. **[권한(Permissions)]** 탭에서 기존에 이상한 정책이 있다면 체크 후 삭제(Detach)합니다.
4. **[권한 추가(Add permissions)]** > **[권한 추가(Add permissions)]** 버튼 클릭.
5. **[직접 정책 연결(Attach policies directly)]** 선택.
6. 검색창에 **`AdministratorAccess`** 를 입력하고 체크박스 선택. (주의: `AdministratorAccess-Amplify` 같은 유사품 말고 정확히 `AdministratorAccess`여야 함)
7. **[다음(Next)]** > **[권한 추가(Add permissions)]** 완료.

| 정책 이름 | 설명 | 비고 |
| --- | --- | --- |
| **AdministratorAccess** | **모든 AWS 서비스 및 리소스에 대한 전체 액세스 권한** | **관리자용 (필수)** |
| **PowerUserAccess** | 대부분의 권한은 있으나, **IAM(사용자 생성/권한 관리) 권한이 없음** | 개발자용 |
| **Billing** | 결제 정보만 볼 수 있는 권한 | 재무팀용 |

---

### 3. 로그인 후 확인 절차 (`putto` 계정)

위 두 가지 조치를 Root 계정에서 완료했다면, 다시 `putto` 계정으로 로그인하여 확인합니다.

1. **로그아웃 후 재로그인:** 권한 갱신을 위해 `putto` 계정을 로그아웃하고 다시 로그인합니다.
2. **결제 대시보드 확인:** 우측 상단 계정 메뉴 > **[결제 및 비용 관리]** 클릭 시 그래프와 금액이 정상적으로 보여야 합니다.
3. **IAM 확인:** IAM 메뉴에 들어가서 다른 사용자를 만들거나 정책을 볼 때 에러가 안 뜨는지 확인합니다.

---

### 4. 주의: MFA(멀티 팩터 인증) 조건부 정책

만약 Root 계정에서 "MFA를 설정하지 않은 사용자는 모든 권한을 거부한다"는 강력한 보안 정책(SCP 또는 사용자 지정 정책)을 걸어두었다면, `putto`가 `AdministratorAccess`를 가지고 있어도 MFA 설정을 하기 전까지는 아무것도 할 수 없습니다.

* **증상:** 분명 관리자 권한을 줬는데, 로그인하자마자 모든 화면이 `Access Denied`로 도배됨.
* **해결:** Root 계정에서 잠시 MFA 강제 정책을 끄거나, 로그인 직후 우측 상단 메뉴에서 `putto`의 MFA 디바이스를 먼저 등록해야 합니다.

---

Next Step: 생성된 IAM 사용자(putto)에게 AWS CLI를 사용하기 위한 '액세스 키(Access Key)' 발급 및 로컬 PC(터미널)에 등록하기
