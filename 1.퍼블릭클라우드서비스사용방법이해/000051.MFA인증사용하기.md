## 멀티 팩터 인증(MFA) 소개 및 설정 가이드

클라우드 계정, 특히 최고 관리자 권한을 가진 **Root 계정**을 보호하는 가장 기본적이면서도 강력한 수단은 **MFA(Multi-Factor Authentication)** 설정입니다. 이 장에서는 MFA의 개념과 초심자를 위한 표준 설정 방법(Google Authenticator)을 다룹니다.

---

### 1. MFA란 무엇인가?

MFA는 로그인을 위해 **두 가지 이상의 증거(Factor)**를 요구하는 인증 방식입니다. 흔히 '2단계 인증(2FA)'이라고도 불립니다.

* **1단계 (지식 기반):** 사용자가 **알고 있는 것** (ID, 비밀번호)
* **2단계 (소유 기반):** 사용자가 **가지고 있는 것** (스마트폰의 OTP 앱, 하드웨어 보안 키, 지문 등)

**왜 필요한가?**
비밀번호는 해킹, 피싱, 무작위 대입 공격 등으로 쉽게 탈취될 수 있습니다. MFA를 설정하면 해커가 비밀번호를 알아내더라도, 사용자의 스마트폰(2단계 인증 수단)을 물리적으로 훔치지 않는 한 로그인이 불가능합니다.

---

### 2. MFA 인증 수단의 종류

AWS 및 주요 클라우드에서 지원하는 대표적인 MFA 방식은 다음과 같습니다.

| 방식 | 설명 | 장점 | 단점 | 추천 대상 |
| --- | --- | --- | --- | --- |
| **가상 MFA 앱**<br>

<br>(Virtual MFA) | 스마트폰 앱에서 30초마다 바뀌는 6자리 숫자(OTP) 생성 | 무료, 간편함, 별도 장비 불필요 | 스마트폰 분실 시 복구 절차 필요 | **대부분의 사용자** |
| **하드웨어 키**<br>

<br>(YubiKey 등) | USB 포트에 꽂거나 터치하여 인증하는 물리적 장치 | 보안성 최상, 피싱 방지 강력 | 구매 비용 발생, 휴대 번거로움 | 보안 관리자 |
| **SMS 인증** | 문자 메시지로 코드 전송 | 별도 앱 설치 불필요 | 심 스와핑(SIM Swapping) 해킹에 취약 | **비추천** |

---

### 3. 실습: 가상 MFA 앱(Google Authenticator) 설정하기

가장 보편적인 **스마트폰 앱(가상 MFA)**을 사용하여 AWS Root 계정에 MFA를 적용하는 절차입니다.

#### **준비물**

* 사용자 스마트폰
* PC (AWS 콘솔 접속용)

#### **단계 1: 인증 앱 설치**

스마트폰의 앱 스토어(App Store) 또는 플레이 스토어(Play Store)에서 다음 앱 중 하나를 검색하여 설치합니다.

* **Google Authenticator (구글 OTP)** - 가장 표준적임
* **Microsoft Authenticator**
* **Authy**

#### **단계 2: AWS 콘솔에서 MFA 할당 시작**

1. PC에서 AWS 관리 콘솔에 **Root 계정**으로 로그인합니다.
2. 우측 상단 **[계정 이름]** 클릭 > **[보안 자격 증명(Security Credentials)]** 선택.
3. **MFA(멀티 팩터 인증)** 섹션에서 **[MFA 할당(Assign MFA)]** 버튼 클릭.
4. **장치 이름 지정:** 식별 가능한 이름 입력 (예: `Root-MFA-Phone`).
5. **MFA 유형 선택:** **[인증 관리자 앱(Authenticator App)]** 선택 후 [다음].

#### **단계 3: QR 코드 스캔 및 연동**

1. PC 화면에 **QR 코드 표시** 버튼을 누르면 QR 코드가 나타납니다.
2. 스마트폰에서 설치한 인증 앱을 실행합니다.
3. 앱 내의 **[+] 버튼** > **[QR 코드 스캔]**을 눌러 PC 화면의 QR 코드를 찍습니다.

#### **단계 4: 연속 인증 코드 입력 (중요)**

AWS는 보안을 위해 **연속된 두 번의 코드**를 요구합니다.

1. 앱 화면에 생성된 **6자리 숫자(MFA 코드 1)**를 PC 화면의 `MFA 코드 1` 칸에 입력합니다.
2. 약 30초 기다리면 앱의 숫자가 **새로운 숫자**로 바뀝니다.
3. 바뀐 **6자리 숫자(MFA 코드 2)**를 PC 화면의 `MFA 코드 2` 칸에 입력합니다.
4. **[MFA 추가]** 버튼 클릭.

#### **단계 5: 설정 완료 및 테스트**

"MFA가 할당되었습니다" 메시지가 뜨면 설정이 완료된 것입니다.

* **테스트:** 로그아웃 후 다시 로그인을 시도해 봅니다. ID/비밀번호 입력 후 **MFA 코드 입력창**이 추가로 뜨는지 확인합니다.

---

### 4. MFA 사용 시 주의사항 (트러블슈팅)

1. **스마트폰 분실/교체 대비:**
* MFA가 설정된 스마트폰을 잃어버리면 Root 계정 접속이 매우 까다로워집니다(AWS 고객센터에 영문으로 소명해야 함).
* 가능하다면 QR 코드를 스캔할 때 캡처해서 안전한 금고(오프라인)에 보관하거나, Authy와 같이 클라우드 백업을 지원하는 앱을 사용하는 것도 방법입니다.


2. **시간 동기화:**
* MFA 코드는 '시간'을 기준으로 생성됩니다. 스마트폰의 시간이 네트워크 시간과 맞지 않으면 코드가 계속 틀렸다고 나옵니다. 앱 설정에서 [시간 수정/동기화]를 수행하세요.


3. **앱 삭제 주의:**
* AWS 콘솔에서 MFA를 해지하지 않은 상태로 스마트폰 앱만 삭제하면 로그인이 불가능해집니다. 앱을 지우기 전에 반드시 콘솔에서 먼저 해제해야 합니다.



---

Next Step: AWS IAM(Identity and Access Management)의 구조 이해 및 그룹/사용자/정책(Policy) 생성 실습
