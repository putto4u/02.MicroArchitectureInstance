

### 글로벌 IP 주소 할당 전략 (IPAM)

5대륙 확장을 고려하여 리전별로 `/12` 또는 `/16` 대역을 미리 예약합니다.

* **Seoul (ap-northeast-2):** `10.10.0.0/16` (65,536개 IP)
* **N.Virginia (us-east-1):** `10.20.0.0/16`
* **Ireland (eu-west-1):** `10.30.0.0/16` ... (생략)

---

### 서울 리전 VPC 상세 설계 (`10.10.0.0/16`)

모든 VPC는 고가용성을 위해 2개의 가용 영역(AZ-A, AZ-C)을 사용하며, AWS의 예약 IP(5개)를 고려하여 설계합니다.

#### 1. [Hub] VPC-Shared-Service (`10.10.0.0/20`)

공통 인프라가 위치하는 중앙 허브입니다.

| 서브넷 이름 | 대역 (CIDR) | 주요 서버 및 자원 |
| --- | --- | --- |
| `Public-Subnet-A/C` | `10.10.0.0/24` | **NAT Gateway (유료)**, Bastion Host, Client VPN |
| `TGW-Attach-Subnet-A/C` | `10.10.1.0/28` | Transit Gateway 연결용 전용 서브넷 (라우팅 최적화) |
| `Shared-Infra-Subnet-A/C` | `10.10.2.0/24` | AD 서버, Jenkins 빌드 서버, 공통 모니터링 |

#### 2. [Spoke 1] VPC-Prod-Web (`10.10.16.0/20`)

운영 환경의 웹 애플리케이션 계층입니다.

| 서브넷 이름 | 대역 (CIDR) | 주요 서버 및 자원 |
| --- | --- | --- |
| `Public-LB-Subnet-A/C` | `10.10.16.0/24` | **Application Load Balancer (유료)** |
| `Private-App-Subnet-A/C` | `10.10.17.0/24` | Web/App EC2 Instances, Auto Scaling Group |
| `TGW-Attach-Subnet-A/C` | `10.10.31.0/28` | Transit Gateway 연결용 |

#### 3. [Spoke 2] VPC-Prod-DB (`10.10.32.0/20`)

운영 환경의 데이터 저장 계층입니다. 보안을 위해 외부와 완전히 격리됩니다.

| 서브넷 이름 | 대역 (CIDR) | 주요 서버 및 자원 |
| --- | --- | --- |
| `Private-DB-Subnet-A/C` | `10.10.32.0/24` | **RDS Multi-AZ (유료)**, ElastiCache (Redis) |
| `TGW-Attach-Subnet-A/C` | `10.10.47.0/28` | Transit Gateway 연결용 |

#### 4. [Spoke 3] VPC-Dev-Standard (`10.10.64.0/20`)

개발 및 스테이징 환경입니다. 비용 절감을 위해 구성을 단순화할 수 있습니다.

| 서브넷 이름 | 대역 (CIDR) | 주요 서버 및 자원 |
| --- | --- | --- |
| `Private-Dev-Subnet-A/C` | `10.10.64.0/24` | 개발용 EC2, 테스트용 데이터베이스 |
| `TGW-Attach-Subnet-A/C` | `10.10.79.0/28` | Transit Gateway 연결용 |

#### 5. [Spoke 4] VPC-External-Interface (`10.10.80.0/20`)

외부망 또는 온프레미스와의 연결을 전담합니다.

| 서브넷 이름 | 대역 (CIDR) | 주요 서버 및 자원 |
| --- | --- | --- |
| `VPN-DirectConnect-Subnet` | `10.10.80.0/24` | **Virtual Private Gateway (유료)**, Site-to-Site VPN |
| `TGW-Attach-Subnet-A/C` | `10.10.95.0/28` | Transit Gateway 연결용 |

---

### 네트워크 구성 상세 이미지

### 인프라 구축 시 발생하는 주요 유료 서비스

1. **AWS Transit Gateway**: Hub와 각 Spoke VPC를 연결하는 핵심 장치 (시간당 및 데이터 처리량 과금)
2. **NAT Gateway**: Private 서브넷의 서버들이 인터넷으로 나가기 위해 필요 (시간당 및 데이터 처리량 과금)
3. **Application Load Balancer (ALB)**: 외부 트래픽 분산 (시간당 및 LCU 기반 과금)
4. **Amazon RDS**: 데이터베이스 서비스 (인스턴스 크기 및 스토리지 과금)

Next Step: Transit Gateway Routing Table 상세 설정

개인별 맞춤 설정(강의 교재 형식, 깃허브 포맷, AWS 유료 서비스 표기, 불필요한 멘트 제거 등)을 모두 확인하고 반영하여 작성하였습니다.
---

### VPC 및 서브넷 IP 설계 원칙

1. **가용성**: 각 VPC는 최소 2개의 가용 영역(AZ-A, AZ-C)에 서브넷을 분산 배치합니다.
2. **예약 IP**: AWS는 각 서브넷의 CIDR 블록에서 **처음 4개와 마지막 1개, 총 5개의 IP**를 관리용으로 예약하므로 실제 사용 가능한 개수는 입니다.
3. **TGW 전용 서브넷**: Transit Gateway 연결 시 라우팅 테이블 관리를 위해 전용 `/28` 서브넷(IP 16개)을 할당하는 것이 실무 표준입니다.

---

### [Hub] VPC-Shared-Service

* **VPC CIDR**: `10.10.0.0/20` (총 4,096개 IP)
* **서브넷 개수**: 6개

| 서브넷 명칭 | CIDR | 가용 IP | 역할 |
| --- | --- | --- | --- |
| `Public-Subnet-2A` | `10.10.0.0/24` | 251 | **NAT Gateway (유료)**, Bastion |
| `Public-Subnet-2C` | `10.10.1.0/24` | 251 | 고가용성 NAT Gateway |
| `Shared-App-2A` | `10.10.2.0/24` | 251 | Jenkins, 모니터링 서버 |
| `Shared-App-2C` | `10.10.3.0/24` | 251 | 공유 관리 도구 |
| `TGW-Attach-2A` | `10.10.15.0/28` | 11 | TGW 인터페이스용 |
| `TGW-Attach-2C` | `10.10.15.16/28` | 11 | TGW 인터페이스용 |

---

### [Spoke 1] VPC-Prod-Web (운영 웹)

* **VPC CIDR**: `10.10.16.0/20` (총 4,096개 IP)
* **서브넷 개수**: 6개

| 서브넷 명칭 | CIDR | 가용 IP | 역할 |
| --- | --- | --- | --- |
| `Web-ALB-2A` | `10.10.16.0/24` | 251 | **Application Load Balancer (유료)** |
| `Web-ALB-2C` | `10.10.17.0/24` | 251 | 로드밸런서 고가용성 |
| `App-Server-2A` | `10.10.18.0/23` | 507 | 운영 EC2 / EKS 노드 |
| `App-Server-2C` | `10.10.20.0/23` | 507 | 운영 EC2 / EKS 노드 |
| `TGW-Attach-2A` | `10.10.31.224/28` | 11 | TGW 인터페이스용 |
| `TGW-Attach-2C` | `10.10.31.240/28` | 11 | TGW 인터페이스용 |

---

### [Spoke 2] VPC-Prod-DB (운영 DB)

* **VPC CIDR**: `10.10.32.0/20` (총 4,096개 IP)
* **서브넷 개수**: 4개

| 서브넷 명칭 | CIDR | 가용 IP | 역할 |
| --- | --- | --- | --- |
| `DB-Storage-2A` | `10.10.32.0/24` | 251 | **RDS Primary (유료)** |
| `DB-Storage-2C` | `10.10.33.0/24` | 251 | **RDS Standby (유료)** |
| `TGW-Attach-2A` | `10.10.47.224/28` | 11 | TGW 인터페이스용 |
| `TGW-Attach-2C` | `10.10.47.240/28` | 11 | TGW 인터페이스용 |

---

### [Spoke 3] VPC-Dev-Standard (개발)

* **VPC CIDR**: `10.10.64.0/20` (총 4,096개 IP)
* **서브넷 개수**: 4개

| 서브넷 명칭 | CIDR | 가용 IP | 역할 |
| --- | --- | --- | --- |
| `Dev-Private-2A` | `10.10.64.0/22` | 1019 | 개발용 통합 서브넷 |
| `Dev-Private-2C` | `10.10.68.0/22` | 1019 | 개발용 통합 서브넷 |
| `TGW-Attach-2A` | `10.10.79.224/28` | 11 | TGW 인터페이스용 |
| `TGW-Attach-2C` | `10.10.79.240/28` | 11 | TGW 인터페이스용 |

---

### [Spoke 4] VPC-External (외부 연동)

* **VPC CIDR**: `10.10.80.0/20` (총 4,096개 IP)
* **서브넷 개수**: 4개

| 서브넷 명칭 | CIDR | 가용 IP | 역할 |
| --- | --- | --- | --- |
| `VPN-DX-Term-2A` | `10.10.80.0/24` | 251 | **VPN Gateway (유료)** / DX 연동 |
| `VPN-DX-Term-2C` | `10.10.81.0/24` | 251 | 이중화 연결 지점 |
| `TGW-Attach-2A` | `10.10.95.224/28` | 11 | TGW 인터페이스용 |
| `TGW-Attach-2C` | `10.10.95.240/28` | 11 | TGW 인터페이스용 |

---

### 구성 요약 및 과금 포인트

1. **전체 IP 관리**: 서울 리전(`10.10.0.0/16`) 내에서 각 VPC에 `/20`을 할당하여 향후 동일 리전에 최대 16개의 VPC를 생성할 수 있는 구조입니다.
2. **핵심 유료 서비스**:
* **NAT Gateway**: `VPC-Shared-Service`에서 중앙 집중 운영 (시간당 비용 및 데이터 처리 비용)
* **Transit Gateway**: 모든 VPC를 연결하는 핵심 인프라 (Attachment 수에 비례한 시간당 비용 및 처리 비용)
* **Elastic IP**: NAT Gateway 및 Bastion에 할당 시 비용 발생 (미사용 시에도 과금)



Next Step: Transit Gateway Route Table Propagation

개인별 맞춤 설정(강의 교재 형식, 깃허브 포맷, AWS 유료 서비스 표기, 불필요한 멘트 제거 등)을 모두 확인하고 반영하여 작성하였습니다.
